# 2022-1 í•™ê¸° ë°ì´í„°ë§ˆì´ë‹ í”„ë¡œì íŠ¸_(7)  

ğŸ ì €ë²ˆ ê¸€ì—ì„œëŠ” support, confidence, liftë¥¼ ê°€ì§€ê³  ê° attribute ê°„ì˜ íŒ¨í„´ì„ ì•Œì•„ë³´ì•˜ë‹¤. ì´ë²ˆ ê¸€ì—ì„œëŠ” ì´ ìˆ˜ì¹˜ë“¤ì´ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ë¬¸ì œë“¤ì„ í•´ê²°í•˜ê¸° ìœ„í•œ <b>Null-Invariant Measures</b>ë¥¼ ì‚¬ìš©í•˜ì—¬ íŒ¨í„´ì„ ë¶„ì„í•  ê²ƒì´ë‹¤.<br>  

ğŸ ì½”ë“œ ì§„í–‰ì˜ ì´í•´ë¥¼ ìœ„í•´ ì´ë²ˆ ê¸€ì—ì„œ ì‚¬ìš©í•  ë°ì´í„°í”„ë ˆì„ì„ ë¨¼ì € ë³´ë„ë¡ í•˜ì.<br>  

ğŸ“Œ <b>1. pre_tran : ìˆ˜ì¹˜í˜•/ë²”ì£¼í˜• attributeê°€ ì„ì—¬ìˆë˜ ì›ë˜ ë°ì´í„°ë¥¼ ë²”ì£¼í˜• ë°ì´í„°ë¡œ ë§Œë“  ê²ƒ</b>  
<p align="center"><img src="https://user-images.githubusercontent.com/65170165/190163699-df8dfc0b-70a4-4447-ba27-52dc3c1113ef.png" width="1000" /></p><br>  

ğŸ“Œ <b>2. transaction : pre_tranì„ ì‚¬ìš©í•˜ì—¬ ë§Œë“  ìµœì¢… íŠ¸ëœì­ì…˜ ë°ì´í„° - Boolean í‘œí˜„í˜•</b>  
<p align="center"><img src="https://user-images.githubusercontent.com/65170165/190164777-82916228-210e-4990-9c4b-c32433538ad1.png" width="1500" /></p><br>  

***  

## 1. Null-Invariant Measures ê°œë…  

ğŸ transaction dataframeì—ì„œ Null dataì˜ ê°œìˆ˜ê°€ ë§ì€ ê²½ìš°ë¥¼ ë¯¸ì—°ì— ë°©ì§€í•˜ê¸° ìœ„í•´ì„œ Null Invariantí•œ metric ì‚¬ìš©<br>  

ğŸ Jaccard, kulczynski, IR, chi-square, p-value ì‚¬ìš©<br>  

- <b>Jaccard</b> : êµì§‘í•©/í•©ì§‘í•©. ë‘ ì§‘í•©ì´ ë™ì¼í•˜ë©´ 1, ê³µí†µì˜ ì›ì†Œê°€ í•˜ë‚˜ë„ ì—†ìœ¼ë©´ 0  
- <b>kulczynski</b> : (0.5) * ((êµì§‘í•©/X) + (êµì§‘í•©/Y)). ë‘ ì§‘í•©ì´ ë™ì¼í•˜ë©´ 1, ê³µí†µì˜ ì›ì†Œê°€ í•˜ë‚˜ë„ ì—†ìœ¼ë©´ 0  
  - 0.5ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‘ ì§‘í•©ì˜ ê´€ê³„ê°€ negativeì¸ì§€ positive ì¸ì§€ ì•Œ ìˆ˜ ìˆìŒ.  
- <b>IR</b> : |X-Y| / í•©ì§‘í•©. ë°ì´í„°ì˜ ë¶„í¬ í˜•íƒœë¥¼ íŒŒì•…í•˜ëŠ” ë° ì‚¬ìš©.  
- <b>chi-square</b> : ë°ì´í„°ì˜ ì—°ê´€ê´€ê³„ ë¶„ì„. í´ìˆ˜ë¡ ì—°ê´€ì„±ì´ ê¹Šì€ ì§‘í•©ì„.  
- <b>p-value</b> : ìœ ì˜í™•ë¥ ì„ ì œê³µí•´ì„œ ëŒ€ë¦½ê°€ì„¤ì„ ì±„íƒí•  ìˆ˜ ìˆëŠ”ì§€ íŒë‹¨ê°€ëŠ¥.  
  
ğŸ ì¼ë°˜ì ìœ¼ë¡œ chi-squareê°€ í¬ê³ , kulczynskiê°€ ì‘ìœ¼ë©´ negativeí•˜ë‹¤ê³  ë§í•  ìˆ˜ ìˆìŒ.<br>  

ğŸ ì˜ˆë¥¼ ë“¤ì–´, kulczynskiê°€ 0.1 ì´ê³  IRì´ 0.98, chi-squareê°€ 111 ì •ë„ë¡œ ë‚˜íƒ€ë‚˜ë©´ ë‘ ì§‘í•©ì˜ ê´€ê³„ëŠ” negativeí•˜ë©°, ë°ì´í„°ì˜ ë¶„í¬ê°€ ë¶ˆê· í˜•ì ì´ë¼ëŠ” ê²ƒì„ ì˜ë¯¸í•¨.<br>  

***  

## 2. chi-square ê³„ì‚°  

```py
# chi-square ê³„ì‚°(original cardio dataframeì˜ attribute ê¸°ì¤€)
# scipy.statsì˜ chi2_contingencyë¥¼ í†µí•´ì„œ contingency table ìƒì„±.
# contingency tableì„ ë°”íƒ•ìœ¼ë¡œ chi-squareì™€ p-value ê³„ì‚°.
pre_tran_2 = pre_tran.drop('cardio', axis = 1)
chi_list_origin = pd.DataFrame()
from scipy.stats import chi2_contingency
for i in range(len(pre_tran_2.columns)):
    f=pre_tran_2.columns[i]
    contigency = pd.crosstab(pre_tran_2[f],pre_tran['cardio'])
    chi, p, dof, expected = chi2_contingency(contigency)
    chi_list_origin = chi_list_origin.append((pd.DataFrame({'chi' :chi, 'p-value':p}, index = [pre_tran_2.columns[i]+" & cardio"])))
chi_list_origin = chi_list_origin.sort_values('chi', ascending = False)
chi_list_origin
```  
<p align="center"><img src="https://user-images.githubusercontent.com/65170165/192100699-324e4a52-7e83-4ff5-8141-e9f6330b6646.png" width="800" /></p><br>  

ğŸ“Œ ìœ„ì˜ ë°ì´í„°í”„ë ˆì„ì²˜ëŸ¼ ê° original dataframeì˜ attributeì™€ cardio ê°„ì˜ chi-square ê°’ê³¼ p-value ê°’ì´ êµ¬í•´ì§„ë‹¤. ì´ë ‡ê²Œ ìˆ˜ì¹˜ë§Œìœ¼ë¡œ ë¹„êµí•˜ë©´ ë²ˆê±°ë¡œìš°ë‹ˆê¹Œ í•œë²ˆ ì‹œê°í™”í•´ì„œ ì‚´í´ë³´ë„ë¡ í•˜ì.<br>  

```py
# Category Data ê¸°ì¤€ Attributeì˜ Cardioì™€ì˜ chi-square ì—°ì‚° ê²°ê³¼ ì‹œê°í™”
fig = go.Figure()
fig.add_trace(
    go.Scatter(
    x = chi_list_origin.index, y = chi_list_origin['chi'], mode = 'markers+lines+text',
    text = chi_list_origin['chi'].round(3), textposition = 'top right', textfont_size = 15))

fig.update_layout(
    {
        'title' : {'text':'Attribute-Cardio ë³„ Chi-Square ê°’', 'font':{'size' : 25}},
        'xaxis' : {'showticklabels':True, 'tickfont' : {'size' : 15}},
        'template' : 'plotly_white'
    })

fig.show()
```  

<p align="center"><img src="https://user-images.githubusercontent.com/65170165/171838919-03db5f46-20a9-4166-b92c-3a87d244365b.png" width="1800" /></p><br>  

***  

ğŸ ì´ë ‡ê²Œ í•´ì„œ ë³„ë¡œ ê¸¸ì§€ ì•Šì€ ì½”ë”©ì„ í†µí•´ ê°„ë‹¨í•˜ê²Œ chi-square ê°’ê³¼ p-valueë¥¼ êµ¬í•  ìˆ˜ ìˆì—ˆë‹¤. í•˜ì§€ë§Œ ìœ„ì˜ 1ì ˆì—ì„œ ê°œë…ì„ ì‚´í´ë³¼ ë•Œ ë³´ì•˜ë“¯ì´ chi-square ê°’ë§Œ ê°€ì§€ê³  ì´ë“¤ê°„ì˜ ê´€ê³„ë¥¼ ë‹¨ì •ì§€ì„ ìˆ˜ëŠ” ì—†ë‹¤. ë”°ë¼ì„œ ì´ ê°’ë“¤ ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ë¥¸ Null-invariant measureë“¤ê¹Œì§€ ì‚¬ìš©í•´ì„œ ë³µí•©ì ìœ¼ë¡œ ë¶„ì„í•  ê²ƒì´ë‹¤.<br>  

ğŸ ë‹¤ìŒ ê¸€ì—ì„œëŠ” ì´ëŸ¬í•œ measure ë¡œë¶€í„° êµ¬í•´ì§„ ê°’ë“¤ì„ ê°€ì§€ê³  ì‹¤ì œ ë°ì´í„°í”„ë ˆì„ì„ ë§Œë“¤ì–´ë³´ê³  ì‹œê°í™” í•œ í›„ ë¶„ì„ê¹Œì§€ ì§„í–‰í•  ê²ƒì´ë‹¤ğŸ˜ŠğŸ˜Š.<br>  

***
